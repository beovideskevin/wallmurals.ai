<!DOCTYPE html>
<html lang="es-ES">
<head>
    <% include partials/head.ejs %>

    <style>
    </style>
</head>
<body>
    <% include partials/navigation.ejs %>

    <section class="relative pt-32 pb-20" id="planSection"> 
        <div class="container">
            <% if (error && message) { %>
            <div class="flex items-center p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400" role="alert">
                <svg class="shrink-0 inline w-4 h-4 me-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
                </svg>
                <span class="sr-only">Info</span>
                <div>
                    <span class="font-medium"><%= message %></span>
                </div>
            </div>
            <% } %>

            <% if (!error && message) { %>
            <div class="flex items-center p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400" role="alert">
                <svg class="shrink-0 inline w-4 h-4 me-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
                </svg>
                    <span class="sr-only">Info</span>
                <div>
                <%= message %>
                </div>
            </div>
            <% } %>
            
            <h2 class="text-3xl md:text-4xl/tight font-semibold mt-4 mb-8 text-center">Your current subscription: <%= (plan?.type || "Free" ) %></h2>
                
            <div id="planContainer" class="grid grid-cols-1 bg-white p-6">
                <div class="flex justify-center">
                    <div id="toggle-count" class="p-1 inline-block border border-gray-200 rounded-lg">
                        <span class="relative inline-block">
                            <input id="toggle-count-monthly" name="toggle-count" type="radio" class="absolute top-0 end-0 size-full border-transparent bg-transparent bg-none text-white rounded-lg cursor-pointer focus:border-0 focus:ring-transparent focus:ring-offset-transparent" checked>
                            <label for="toggle-count-monthly" class="inline-block py-2 px-5 rounded-s-md uppercase text-sm font-semibold">
                                Monthly
                            </label>
                        </span>
                        <span class="relative inline-block">
                            <input id="toggle-count-annual" name="toggle-count" type="radio" class="absolute top-0 end-0 size-full border-transparent bg-transparent bg-none text-white rounded-lg cursor-pointer focus:border-0 focus:ring-transparent focus:ring-offset-transparent">
                            <label for="toggle-count-annual" class="inline-block py-2 px-5 rounded-e-md uppercase text-sm font-semibold">
                                Annual
                            </label>
                        </span>
                    </div>
                </div>

                <p class="text-muted text-base mx-auto mt-5">Save up to 40% with Annual Plan.</p>

                <div id="StarterContent">
                    <div class="mt-14" id="start-month" role="tabpanel" aria-labelledby="start-month-tab">
                        <div class="grid lg:grid-cols-2 grid-cols-1 gap-10">
                            <div class="flex flex-col shadow-2xl rounded-xl bg-white overflow-hidden">
                                <div class="text-center pt-10">
                                    <img src="/assets/images/vector/vector-1.png" class="h-28 w-28 mx-auto" alt="email">
                                    <h5 class="text-2xl font-semibold text-black">Free</h5>
                                    <h2 class="text-5xl mt-5 mb-1 items-center align-middle">
                                        <sup class="text-3xl align-middle">$</sup>
                                        <span>0</span>
                                    </h2>
                                    <span class="text-base font-medium text-muted">per month</span>
                                </div>

                                <div class="px-5 py-5 mx-auto">
                                    <ul class="text-center">
                                        <li class="flex items-center justify-start py-2">
                                            <i data-lucide="check" class="text-primary text-lg align-middle me-2"></i>
                                            <h5 class="font-medium">1,000 views/month</h5>
                                        </li>
                                        <li class="flex items-center justify-start py-2">
                                            <i data-lucide="check" class="text-primary text-lg align-middle me-2"></i>
                                            <h5 class="font-medium">1 Gb Storage</h5>
                                        </li>
                                        <li class="flex items-center justify-start py-2">
                                            <i data-lucide="x" class="text-muted text-lg align-middle me-2"></i>
                                            <h5 class="font-medium text-muted">Free Support</h5>
                                        </li>
                                    </ul>
                                </div>

                                <% if (plan) { %>
                                    <div class="flex justify-center px-10 pb-10">
                                        <button class="py-2 px-6 inline-flex rounded-md text-base items-center justify-center border border-primary text-white bg-primary hover:bg-primaryDark transition-all duration-500 font-medium w-full">Downgrade to FREE</button>
                                    </div> 
                                <% } %>
                            </div>
                                
                            <div class="flex flex-col shadow-2xl rounded-xl bg-white overflow-hidden">
                                <div class="text-center pt-10">
                                    <img src="/assets/images/vector/vector-2.png" class="h-28 w-28 mx-auto"
                                        alt="vector-2">
                                    <h5 class="text-2xl font-semibold text-black">Professional</h5>
                                    <h2 class="text-5xl mt-5 mb-1 items-center align-middle">
                                        <sup class="text-3xl align-middle">$</sup>
                                        <span data-hs-toggle-count='{
                                            "target": "#toggle-count",
                                            "min": 160,
                                            "max": 99
                                        }' >160</span>
                                    </h2>
                                    <span class="text-base font-medium text-muted">per month</span>
                                </div>

                                <div class="px-5 py-5 mx-auto">
                                    <ul class="text-center text-black">
                                        <li class="flex items-center justify-start py-2">
                                            <i data-lucide="check" class="text-primary text-lg align-middle me-2"></i>
                                            <h5 class="font-medium">100,000 views/month</h5>
                                        </li>
                                        <li class="flex items-center justify-start py-2">
                                            <i data-lucide="check" class="text-primary text-lg align-middle me-2"></i>
                                            <h5 class="font-medium">10 Gb Storage</h5>
                                        </li>
                                        <li class="flex items-center justify-start py-2">
                                            <i data-lucide="check" class="text-primary text-lg align-middle me-2"></i>
                                            <h5 class="font-medium">Free Support</h5>
                                        </li>
                                    </ul>
                                </div>

                                <% if (!plan) { %>
                                    <div class="flex justify-center px-10 pb-10">
                                        <button class="py-2 px-6 inline-flex rounded-md text-base items-center justify-center border border-primary text-white bg-primary hover:bg-primaryDark transition-all duration-500 font-medium w-full">Upgrade to Professional</button>
                                    </div>
                                <% } %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="relative pt-10 pb-20" id="passwordSection"> 
        <div class="container">
            <h2 class="text-3xl md:text-4xl/tight font-semibold mt-4 mb-8 text-center">Change your password</h2>

            <div id="passwordContainer" class="shadow-2xl rounded-xl bg-white p-6">
                <form id="changePasswordForm" method="POST" action="/dashboard/changepassword" onsubmit="return checkPasswordsValue();">
                    <div class="grid sm:grid-cols-2 gap-6">
                        <div>
                            <label for="formNewPassword" class="block text-sm/normal font-semibold text-black mb-2">New password</label>
                            <input type="password" class="block w-full text-sm rounded-md py-3 px-4 border-gray-200 focus:border-gray-300 focus:ring-transparent" name="formNewPassword" id="formNewPassword" placeholder="Type your new password..." required="">                            
                        </div>
                        <div>
                            <label for="formPassword2" class="block text-sm/normal font-semibold text-black mb-2">Confirm password</label>
                            <input type="password" class="block w-full text-sm rounded-md py-3 px-4 border-gray-200 focus:border-gray-300 focus:ring-transparent" name="formNewPassword2" id="formNewPassword2" placeholder="Confirm your password..." required="">                            
                        </div>
                    </div>

                    <div class="mt-4">
                        <button id="changePasswordBtn" type="submit" class="py-2 px-6 rounded-md text-baseitems-center justify-center border border-primary text-white bg-primary hover:bg-primaryDark transition-all duration-500 font-medium">Change password</button>
                    </div>

                    <input type="hidden" name="_csrf" value="<%= csrf %>">
                </form>
            </div>
        </div>
    </section>

    <section class="relative pt-10 pb-20" id="closeAccountSection"> 
        <div class="container">
            <h2 class="text-3xl md:text-4xl/tight font-semibold mt-4 mb-8 text-center ">Close your account</h2>

            <div id="closeAccountContainer" class="shadow-2xl rounded-xl bg-white p-6">
                <form id="closeAccountForm" method="POST" action="/dashboard/closeaccount" onsubmit="return checkAccountValue();">
                    <div class="grid sm:grid-cols-2 gap-6">
                        <div>
                            <label for="formPassword" class="block text-sm/normal font-semibold text-black mb-2">Enter your password</label>
                            <input type="password" class="block w-full text-sm rounded-md py-3 px-4 border-gray-200 focus:border-gray-300 focus:ring-transparent" name="formPassword" id="formPassword" placeholder="Type your password..." required="">
                        </div>
                        <div>
                            <label for="formReason" class="block text-sm/normal font-semibold text-black mb-2">Why are you leaving?</label>
                            <select id="formReason" name="formReason" class="block w-full text-sm rounded-md py-3 px-4 border-gray-200 focus:border-gray-300 focus:ring-transparent" required="">
                                <option>Please tell us more...</option>
                                <option value="price">It is too expensive</option>
                                <option value="app">The web application is not working</option>
                                <option value="engagement">Not enough engagement from public</option>
                            </select>
                        </div>
                    </div>

                    <div class="mt-4">
                        <button id="closeAccountBtn" type="submit" class="py-2 px-6 rounded-md text-baseitems-center justify-center border border-primary text-white bg-primary hover:bg-primaryDark transition-all duration-500 font-medium">Close account</button>
                    </div>

                    <input type="hidden" name="_csrf" value="<%= csrf %>">
                </form>
            </div>
        </div>
    </section>

    <% include partials/footer.ejs %>

    <script>
        function checkPasswordsValue() {
            let password = document.getElementById("formNewPassword");
            let password2 = document.getElementById("formNewPassword2");
            return password && password.value != "" && password2 && password2.value != "";

        }

        function checkAccountValue() {
            let password = document.getElementById("formPassword");
            return password && password.value != "";
        }
    </script>
</body>
</html>